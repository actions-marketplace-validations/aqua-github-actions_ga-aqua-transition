on: push
name: Test on push
jobs:
  transition:
    name: Set transition to ${{ matrix.transition }} for defect DF001268
    runs-on: ubuntu-latest
    strategy:
      matrix:
        transition: [ "new", "solved", "in processing", "reopened", "closed", "paused"]
    steps:
      - uses: actions/checkout@v2
      - name: login to aqua saas instance
        id: login
        uses: uniqueck/ga-aqua-login@v1.0.1
        env:
          AQUA_USERNAME: ${{ secrets.AQUA_USERNAME }}
          AQUA_PASSWORD: ${{ secrets.AQUA_PASSWORD }}
      - name: set transition to ${{ matrix.transition }}
        uses: ./
        env:
          NODE_DEBUG: http, net, stream
        with:
          aqua-token: ${{ steps.login.outputs.token }}
          defect: DF001268
          transition: ${{ matrix.transition }}
      - name: logout to aqua saas instance
        uses: uniqueck/ga-aqua-logout@v1.0.0
        with:
          aqua-token: ${{ steps.login.outputs.token }}

